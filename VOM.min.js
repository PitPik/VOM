/*! VOM - v0.1.0 2017-06-10 */

!function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define("VOM",[],function(){return b(a)}):a.VOM=b(a)}(this,function(a){"use strict";function b(a,c){for(var d=c.length;d--;)c[d][a.options.childNodes]&&b(a,c[d][a.options.childNodes]),delete p[a.id][c[d][a.options.idProperty]];return c}function c(a,b){return(b.parentNode?d(b.parentNode,a.options.childNodes):a.model).indexOf(b)}function d(a,b){return a[b]=a[b]||[],a[b]}function e(a,b,c,e,i,j){return a.options.moveCallback.call(a,b,i,j),b.parentNode?a.options.parentCheck&&g(a,b,c):h([b],a,c,i,j),a.type=i,a.sibling=j,b.parentNode===c&&e>b.index&&b.index!==-1&&e--,b=b.index!==-1&&b.parentNode&&f(a,b,!0)||b,d(c,a.options.childNodes).splice(e||0,0,b),b.parentNode=c,b}function f(a,c,e){return!e&&b(a,[c]),d(c.parentNode,a.options.childNodes).splice(c.index,1)[0]||c}function g(a,b,c){var d=c;for(b===c&&m("ERROR: can't move element inside itself",a.options);d=d.parentNode;)d===b&&m("ERROR: can't move parent inside it's own child",a.options)}function h(a,b,c,d,e){for(var f=(b.options,!1),g=!0,j=b.options.idProperty,k={},l=0,m=a.length;l<m;l++)k=a[l],f=!k.parentNode,k[j]||(k[j]="vom_"+q++,g=!1),p[b.id][k[j]]=k,k.parentNode=c||b.model.root,k.index=0,f&&(k=i(b,k,g)),b.options.preRecursionCallback.call(b,k,d,e),k[b.options.childNodes]&&h(k[b.options.childNodes],b,k),b.options.enrichModelCallback.call(b,k,d,e);return a}function i(a,b,c){var d=!1,e=a.options.enhanceMap,f=0,g=0,h="",i="",k="",l="",m={},n={},o=[];for(var p in b)if(f=e[p]&&e[p].length-1){g=e[p].indexOf("*"),m=s(b,e[p],g>-1?f-g+1:1),l=e[p].join("."),h=l.split("*")[1]||"",o=h.split(".").splice(1);for(var q in m)n=h?s(m[q],o,1):m,i=l.replace("*",q),k=o[o.length-1]||q,a.addProperty(k,n,i)}else d="parentNode"===p||p===r,p===a.options.idProperty?j(b,p,b[p],c):(e[p]||e["*"]&&1===e.length||d)&&a.addProperty(p,b,null,d);return b}function j(a,b,c,d){return delete a[b],Object.defineProperty(a,b,{enumerable:!!d,configurable:!1,writable:!1,value:c})}function k(a,b,d,e,f,g,h){return Object.defineProperty(b,a,{get:function(){return a===f?c(e,b):d[h||a]},set:function(c){var g=d[h||a];d[h||a]=c,l(h||a,b,c,g,d,e,f)},enumerable:g})}function l(a,b,c,d,e,f,g){(a===f.options.idProperty||a===g||f.options.setterCallback.call(f,f.type||a,b,c,d,f.sibling))&&(e[a]=d,m("ERROR: Cannot set property '"+a+"' to '"+c+"'",f.options)),delete f.type,delete f.sibling}function m(b,c){if(!c.throwErrors&&"undefined"!=typeof a&&a.console)return console.warn?console.warn(b):console.log(b);throw b}var n=function(a,b){this.options={parentCheck:!1,idProperty:"id",setterCallback:function(){},enrichModelCallback:function(){},preRecursionCallback:function(){},moveCallback:function(){},enhanceMap:[],childNodes:"childNodes",throwErrors:!1},this.model=a||[],o(this,b||{})},o=function(a,b){var c="",d={};p.push({}),j(a,"id",p.length-1);for(var e in b)a.options[e]=b[e];for(;c=a.options.enhanceMap.shift();)c=c.split("."),a.options.enhanceMap[c[0]]=c;d[a.options.childNodes]=a.model,j(a.model,"root",d),h(a.model,a)},p=[],q=0,r="index",s=function(a,b,c){for(var d=0,e=b.length-(c||0);d<e;d++)a=a&&a[b[d]];return a};return n.prototype={getElementById:function(a){return p[this.id][a]},getElementsByProperty:function(a,b){var c=[],d=void 0!==b,e=void 0!==a,f=[],g=null;for(var h in p[this.id])g=void 0!==p[this.id][h][a]?p[this.id][h][a]:s(p[this.id][h],f[0]?f:f=e&&a.split(".")),(d&&g===b||!d&&void 0!==g||!d&&!e)&&c.push(p[this.id][h]);return c},appendChild:function(a,b){return b=b||this.model.root,e(this,a,b,d(b,this.options.childNodes).length,"appendChild",b)},prependChild:function(a,b){return e(this,a,b||this.model.root,0,"prependChild",b)},insertBefore:function(a,b){return e(this,a,b.parentNode,b.index,"insertBefore",b)},insertAfter:function(a,b){return e(this,a,b.parentNode,b.index+1,"insertAfter",b)},replaceChild:function(a,b){var c=b.index,d=b.parentNode;return f(this,b),e(this,a,d,c,"replaceChild",b),b},removeChild:function(a){return f(this,a),this.options.setterCallback.call(this,"removeChild",a),a},reinforceProperty:j,addProperty:function(a,b,c,d){var e={};e[c||a]=b[a],k(a,b,e,this,r,!d,c)},getCleanModel:function(){return JSON.parse(JSON.stringify(this.model))},destroy:function(){return b(this,this.model)}},n});
//# sourceMappingURL=VOM.js.map