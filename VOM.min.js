/*! VOM - v0.1.0 2017-02-04 */

!function(a,b){"object"==typeof exports?module.exports=b(a):"function"==typeof define&&define.amd?define("VOM",[],function(){return b(a)}):a.VOM=b(a)}(this,function(a){"use strict";function b(a,c){for(var d=c.length;d--;)c[d].childNodes&&b(a.options,c[d].childNodes),delete p[a.id][c[d][a.options.idProperty]];return c}function c(a,b){return(b.parentNode?d(b.parentNode):a.model).indexOf(b)}function d(a){return a.childNodes=a.childNodes||[],a.childNodes}function e(a,b,c,e){return b.parentNode?a.options.parentCheck&&g(a,b,c):h([b],a,c),b.parentNode===c&&e>b.index&&b.index!==-1&&e--,b=b.index!==-1&&b.parentNode&&f(a,b,!0)||b,d(c).splice(e||0,0,b),b.parentNode=c,b}function f(a,c,e){return!e&&b(a,[c]),d(c.parentNode).splice(c.index,1)[0]||c}function g(a,b,c){var d=c;for(b===c&&m("ERROR: can't move element inside itself",a.options);d=d.parentNode;)d===b&&m("ERROR: can't move parent inside it's own child",a.options)}function h(a,b,c){for(var d=(b.options,!1),e=!0,f=b.options.idProperty,g={},j=0,k=a.length;j<k;j++)g=a[j],d=!g.parentNode,g[f]||(g[f]=q++,e=!1),p[b.id][g[f]]=g,g.parentNode=c||b.model.root,g.childNodes&&h(g.childNodes,b,g),g.index=0,d&&(g=i(b,g,e)),b.options.enrichModelCallback.call(b,g);return a}function i(a,b,c){var d={},e=!1;for(var f in b)e="parentNode"===f||f===r,f===a.options.idProperty?j(b,f,b[f],c):(a.options.enhanceAll||a.options.enhanceMap[f]||e)&&(d[f]=b[f],k(f,b,d,a,r,!e));return b}function j(a,b,c,d){return delete a[b],Object.defineProperty(a,b,{enumerable:!!d,configurable:!1,writable:!1,value:c})}function k(a,b,d,e,f,g){return Object.defineProperty(b,a,{get:function(){return a===f?c(e,b):d[a]},set:function(c){var g=d[a];d[a]=c,l(a,b,c,g,d,e,f)},enumerable:g})}function l(a,b,c,d,e,f,g){(a===f.options.idProperty||a===g||f.options.setterCallback.call(f,a,b,c,d))&&(e[a]=d,m("ERROR: Cannot set property '"+a+"' to '"+c+"'",f.options))}function m(b,c){if(!c.throwErrors&&"undefined"!=typeof a&&a.console)return console.warn?console.warn(b):console.log(b);throw b}var n=function(a,b){this.options={parentCheck:!1,idProperty:"id",setterCallback:function(){},enrichModelCallback:function(){},enhanceMap:[],enhanceAll:!1,throwErrors:!1},this.model=a||[],o(this,b||{})},o=function(a,b){var c="",d=[];p.push({}),j(a,"id",p.length-1);for(var e in b)a.options[e]=b[e];for(d=a.options.enhanceMap;c=d.shift();)d[c]=!0;j(a.model,"root",{childNodes:a.model}),h(a.model,a)},p=[],q=0,r="index";return n.prototype={getElementById:function(a){return p[this.id][a]},getElementsByProperty:function(a,b){var c=[],d=void 0!==b,e=void 0!==a;for(var f in p[this.id])(d&&p[this.id][f][a]===b||!d&&void 0!==p[this.id][f][a]||!d&&!e)&&c.push(p[this.id][f]);return c},insertBefore:function(a,b){return e(this,a,b.parentNode,b.index)},insertAfter:function(a,b){return e(this,a,b.parentNode,b.index+1)},appendChild:function(a,b){return b=b||this.model.root,e(this,a,b,d(b).length)},prependChild:function(a,b){return e(this,a,b||this.model.root,0)},replaceChild:function(a,b){var c=b.index,d=b.parentNode;return f(this,b),e(this,a,d,c),b},removeChild:function(a){return f(this,a),this.options.setterCallback.call(this,"removeChild",a),a},reinforceProperty:j,destroy:function(){return b(this,this.model)}},n});
//# sourceMappingURL=VOM.js.map